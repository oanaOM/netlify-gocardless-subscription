_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[14],{"0sJp":function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/customer/[id]/manage",function(){return t("zOT6")}])},"12xj":function(e,n,t){"use strict";t.d(n,"a",(function(){return r}));var r=[{id:1,category:"Basic Subscription",description:"Daily fresh dog homemade meals for your best friend",image:"pizza_doggie.png",value:"$15"},{id:2,category:"Pro Subscription",description:"Daily fresh dog homemade meals + treats",image:"happy_dog_face.png",value:"$20"},{id:3,category:"Premium Subscription",description:"Daily fresh dog homemade meals + treats + a ball",image:"happy_dog_face.png",value:"$30"}]},"1xSc":function(e,n,t){"use strict";t.d(n,"a",(function(){return C}));var r=t("nKUr"),c=t("jT3O"),i=t("q1tI"),o=t("oRYz"),a=t("20a2"),s=t("XxQ4"),u=t("5SEd"),d=t("mToe");function j(){var e=Object(c.a)(["\n    position: absolute;\n    bottom: 0;\n    margin: 32px 0;\n    font-size: 0.75rem;\n    color: rgba(26, 26, 26, 0.5);\n  "]);return j=function(){return e},e}function b(){var e=u.a.footer(j());return Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)(e,{children:["Powered by ",Object(r.jsx)("strong",{children:"GoCardless"})]})})}var f=t("xwfA");function l(){var e=Object(c.a)(["\n  color: #ffffff;\n  font-size: 2rem;\n"]);return l=function(){return e},e}function h(){var e=Object(c.a)(["\n  color: rgba(26, 26, 26, 0.5);\n"]);return h=function(){return e},e}function p(){var e=Object(c.a)(["\n  align-items: top;\n"]);return p=function(){return e},e}function x(){var e=Object(c.a)(["\n  background-color: transparent;\n  padding: 32px 32px 40px;\n  height: 100%;\n  overflow-y: auto;\n  flex: 0 0 60%;\n"]);return x=function(){return e},e}function O(){var e=Object(c.a)(["\n  padding: 64px 64px 40px;\n  height: 100%;\n  overflow-y: auto;\n  background-color: ",";\n  flex: 0 0 40%;\n"]);return O=function(){return e},e}function g(){var e=Object(c.a)(["\n  display: flex;\n  flex-direction: row;\n  height: 100%;\n  width: 100%;\n  margin: 0;\n  padding: 0;\n"]);return g=function(){return e},e}function v(){var e=Object(c.a)(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n"]);return v=function(){return e},e}var m=u.a.div(v()),y=u.a.main(g()),w=u.a.div(O(),f.b),_=u.a.div(x()),S=u.a.div(p()),k=u.a.h2(h()),D=u.a.div(l());function C(e){var n=e.leftSideChildren,t=e.rightSideChildren,c=Object(o.useIdentityContext)().user,u=Object(i.useState)(),j=u[0],f=u[1];Object(a.useRouter)();return Object(i.useEffect)((function(){f(c.user_metadata.full_name)}),[f]),Object(r.jsx)(m,{children:Object(r.jsxs)(y,{children:[Object(r.jsx)(w,{children:Object(r.jsxs)(S,{children:[Object(r.jsx)("div",{children:Object(r.jsx)(d.a,{src:"happy_dog_face.png",width:"35",height:"35"})}),Object(r.jsxs)(k,{children:["Welcome ",j,"!"]}),n&&n,!n&&Object(r.jsx)(D,{children:Object(r.jsx)(s.a,{})}),Object(r.jsx)(b,{})]})}),Object(r.jsx)(_,{children:t})]})})}},XxQ4:function(e,n,t){"use strict";t.d(n,"a",(function(){return a}));var r=t("nKUr"),c=(t("q1tI"),t("oRYz")),i=t("2Rt/"),o=t("20a2");function a(){var e=Object(c.useIdentityContext)(),n=Object(o.useRouter)();return Object(r.jsx)(i.a,{variant:"link",onClick:function(){e.logoutUser(),n.push("/")},children:"Logout"})}},mToe:function(e,n,t){"use strict";t.d(n,"a",(function(){return c}));var r=t("nKUr");function c(e){var n=e.src,t=e.height,c=e.width;return Object(r.jsx)("img",{src:"/".concat(n),width:c,height:t})}},rg98:function(e,n,t){"use strict";function r(e,n,t,r,c,i,o){try{var a=e[i](o),s=a.value}catch(u){return void t(u)}a.done?n(s):Promise.resolve(s).then(r,c)}function c(e){return function(){var n=this,t=arguments;return new Promise((function(c,i){var o=e.apply(n,t);function a(e){r(o,c,i,a,s,"next",e)}function s(e){r(o,c,i,a,s,"throw",e)}a(void 0)}))}}t.d(n,"a",(function(){return c}))},zOT6:function(e,n,t){"use strict";t.r(n),t.d(n,"default",(function(){return S}));var r=t("nKUr"),c=t("vJKn"),i=t.n(c),o=t("rg98"),a=t("vDqi"),s=t.n(a),u=t("q1tI"),d=t("1xSc"),j=t("jT3O"),b=t("20a2"),f=t("oRYz"),l=t("5SEd"),h=t("2Rt/"),p=t("26zG");function x(){var e=Object(j.a)(["\n  border-bottom: 1px solid #9ad9c7;\n  padding: 16px;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  flex-grow: 1;\n  justify-content: space-between;\n"]);return x=function(){return e},e}var O=l.a.div(x());function g(e){var n=e.title,t=e.description,c=e.value,a=(e.img,e.subscribe,Object(f.useIdentityContext)().user),u=Object(b.useRouter)(),d=Object(p.b)(),j=Object(p.c)(),l=[],x=j.customer.id,g=function(){var e=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d({type:"ADD_SUBS",subs:{category:n,description:t,value:c}}),j.customer.id){e.next=6;break}return e.next=4,s.a.post("/api/customers",{email:a.email,netlifyID:a.id}).then((function(e){u.push(e.data.redirect_url)})).catch((function(e){console.log(e),console.error(e)}));case 4:e.next=10;break;case 6:return e.next=8,s.a.get("/api/mandates").then((function(e){var n=e.data;l=n.filter((function(e){return e.links.customer===x}))})).catch((function(e){return console.error(e)}));case 8:d({type:"ADD_LINK_MANDATE",links:l[0].id}),u.push({pathname:"/customer/[id]/subscribe",query:{id:a.id}});case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.jsxs)(O,{children:[Object(r.jsxs)("div",{children:[Object(r.jsx)("strong",{children:n}),Object(r.jsx)("p",{children:t}),Object(r.jsx)("p",{children:c})]}),Object(r.jsx)(h.a,{onClick:g,children:"Continue"})]})}var v=t("xwfA");function m(){var e=Object(j.a)(["\n    padding: 1rem 0;\n    display: flex;\n    flex-direction: row;\n    justify-content: space-between;\n    border-bottom: 1px solid ",";\n  "]);return m=function(){return e},e}function y(e){var n=e.subscriptions,t=e.loading,c=l.a.div(m(),v.c);return Object(r.jsxs)(r.Fragment,{children:[t&&Object(r.jsx)("div",{className:"container",children:Object(r.jsx)(h.d,{})}),(null===n||void 0===n?void 0:n.length)>0&&Object(r.jsx)("div",{children:n.map((function(e,n){var t=new Date(e.created_at).toLocaleDateString("en-gb",{year:"numeric",month:"short",day:"numeric"});return Object(r.jsxs)(c,{children:[Object(r.jsxs)("div",{children:[e.name," created on: ",t]}),Object(r.jsxs)("div",{children:[e.amount,e.currency]})]},n)}))})]})}var w=t("XxQ4"),_=t("12xj");function S(){var e=Object(p.c)(),n=Object(p.b)(),t=Object(u.useState)(),c=t[0],a=t[1],j=Object(u.useState)(!1),b=j[0],f=j[1],l=e.customer.id;return Object(u.useEffect)(Object(o.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.customer.id){t.next=4;break}return f(!0),t.next=4,s.a.get("/api/subscriptions?id=".concat(l)).then((function(e){a(e.data),n({type:"ADD_GC_SUBS",subs:e.data[0].links}),f(!1)})).catch((function(e){return console.error(e)}));case 4:case"end":return t.stop()}}),t)}))),[a]),Object(r.jsx)(r.Fragment,{children:Object(r.jsx)(d.a,{leftSideChildren:Object(r.jsx)(w.a,{}),rightSideChildren:Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("h1",{children:"Manage subscriptions"}),Object(r.jsx)("h4",{children:"Current subscriptions"}),Object(r.jsx)("hr",{}),Object(r.jsx)(y,{subscriptions:c,loading:b}),!c&&Object(r.jsx)("p",{children:"No subscriptions yet"}),Object(r.jsx)("br",{}),Object(r.jsx)("br",{}),Object(r.jsx)("br",{}),Object(r.jsx)("h4",{children:"Add new subscription"}),Object(r.jsx)("hr",{}),Object(r.jsx)("div",{children:_.a.map((function(e,n){return Object(r.jsx)(g,{title:e.category,description:e.description,value:e.value,img:e.image},n)}))})]})})})}}},[["0sJp",0,1,4,2,3,6,5]]]);